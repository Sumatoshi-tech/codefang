{
  "metadata": {
    "title": "Kubernetes Benchmark V2 (Optimized)",
    "timestamp": "2026-02-25T20:40:56.858515+00:00",
    "optimizations": [
      "Parser reuse across files",
      "Parallel worker pool (-w N)",
      "Lazy language loading (sync.Once)",
      "Format 'none' (skip serialization)",
      "Smart file collection (skip .git, vendor)"
    ]
  },
  "results": [
    {
      "tool": "uast (optimized)",
      "category": "ast_parse_batch",
      "description": "Parse all Go files \u2014 parallel workers, no serialization (-w 4 -f none)",
      "version": "dev-optimized",
      "runs": [
        {
          "wall_time_s": 26.04,
          "peak_rss_mb": 661.5,
          "cpu_percent": 384.0,
          "user_time_s": 97.52,
          "sys_time_s": 2.61
        },
        {
          "wall_time_s": 25.52,
          "peak_rss_mb": 729.7,
          "cpu_percent": 383.0,
          "user_time_s": 95.84,
          "sys_time_s": 2.15
        },
        {
          "wall_time_s": 25.32,
          "peak_rss_mb": 716.0,
          "cpu_percent": 385.0,
          "user_time_s": 95.6,
          "sys_time_s": 2.07
        }
      ],
      "avg_wall_time_s": 25.627,
      "avg_peak_rss_mb": 702.4,
      "avg_cpu_percent": 384.0,
      "min_wall_time_s": 25.32,
      "max_wall_time_s": 26.04,
      "median_wall_time_s": 25.52,
      "stddev_wall_time_s": 0.303,
      "command": "cd /tmp/benchmark-repos/kubernetes && /workspace/build/bin/uast parse --all -f none -w 4",
      "success": true,
      "error": ""
    },
    {
      "tool": "uast (original)",
      "category": "ast_parse_batch",
      "description": "Parse all Go files \u2014 xargs -P 4, JSON output (original method)",
      "version": "dev-optimized-build",
      "runs": [
        {
          "wall_time_s": 44.32,
          "peak_rss_mb": 2609.4,
          "cpu_percent": 380.0,
          "user_time_s": 148.63,
          "sys_time_s": 20.16
        },
        {
          "wall_time_s": 45.8,
          "peak_rss_mb": 2516.3,
          "cpu_percent": 379.0,
          "user_time_s": 151.92,
          "sys_time_s": 21.87
        },
        {
          "wall_time_s": 44.11,
          "peak_rss_mb": 2650.6,
          "cpu_percent": 378.0,
          "user_time_s": 147.36,
          "sys_time_s": 19.73
        }
      ],
      "avg_wall_time_s": 44.743,
      "avg_peak_rss_mb": 2592.1,
      "avg_cpu_percent": 379.0,
      "min_wall_time_s": 44.11,
      "max_wall_time_s": 45.8,
      "median_wall_time_s": 44.32,
      "stddev_wall_time_s": 0.752,
      "command": "find /tmp/benchmark-repos/kubernetes -name \"*.go\" -not -path \"*/vendor/*\" -print0 | xargs -0 -P 4 -n 500 /workspace/build/bin/uast parse > /dev/null 2>&1",
      "success": true,
      "error": ""
    },
    {
      "tool": "ast-grep",
      "category": "ast_parse_batch",
      "description": "Search all Go files for function pattern (16k+ files)",
      "version": "0.41.0",
      "runs": [
        {
          "wall_time_s": 5.47,
          "peak_rss_mb": 134.8,
          "cpu_percent": 381.0,
          "user_time_s": 20.34,
          "sys_time_s": 0.53
        },
        {
          "wall_time_s": 5.37,
          "peak_rss_mb": 130.9,
          "cpu_percent": 384.0,
          "user_time_s": 20.16,
          "sys_time_s": 0.47
        },
        {
          "wall_time_s": 5.38,
          "peak_rss_mb": 169.2,
          "cpu_percent": 393.0,
          "user_time_s": 20.51,
          "sys_time_s": 0.65
        }
      ],
      "avg_wall_time_s": 5.407,
      "avg_peak_rss_mb": 145.0,
      "avg_cpu_percent": 386.0,
      "min_wall_time_s": 5.37,
      "max_wall_time_s": 5.47,
      "median_wall_time_s": 5.38,
      "stddev_wall_time_s": 0.045,
      "command": "sg -p \"func \\$NAME\" --lang go /tmp/benchmark-repos/kubernetes > /dev/null 2>&1; true",
      "success": true,
      "error": ""
    },
    {
      "tool": "uast (optimized)",
      "category": "ast_parse_single",
      "description": "Parse single 30k-line file \u2014 lazy loading, no serialization",
      "version": "dev-optimized",
      "runs": [
        {
          "wall_time_s": 0.37,
          "peak_rss_mb": 70.8,
          "cpu_percent": 105.0,
          "user_time_s": 0.36,
          "sys_time_s": 0.03
        },
        {
          "wall_time_s": 0.38,
          "peak_rss_mb": 70.9,
          "cpu_percent": 105.0,
          "user_time_s": 0.39,
          "sys_time_s": 0.01
        },
        {
          "wall_time_s": 0.36,
          "peak_rss_mb": 70.8,
          "cpu_percent": 105.0,
          "user_time_s": 0.36,
          "sys_time_s": 0.02
        }
      ],
      "avg_wall_time_s": 0.37,
      "avg_peak_rss_mb": 70.8,
      "avg_cpu_percent": 105.0,
      "min_wall_time_s": 0.36,
      "max_wall_time_s": 0.38,
      "median_wall_time_s": 0.37,
      "stddev_wall_time_s": 0.008,
      "command": "/workspace/build/bin/uast parse -f none /tmp/benchmark-repos/kubernetes/pkg/apis/core/validation/validation_test.go",
      "success": true,
      "error": ""
    },
    {
      "tool": "uast (json)",
      "category": "ast_parse_single",
      "description": "Parse single 30k-line file \u2014 lazy loading, JSON output",
      "version": "dev-optimized",
      "runs": [
        {
          "wall_time_s": 0.97,
          "peak_rss_mb": 393.1,
          "cpu_percent": 130.0,
          "user_time_s": 1.04,
          "sys_time_s": 0.22
        },
        {
          "wall_time_s": 0.92,
          "peak_rss_mb": 408.0,
          "cpu_percent": 131.0,
          "user_time_s": 1.0,
          "sys_time_s": 0.21
        },
        {
          "wall_time_s": 0.9,
          "peak_rss_mb": 321.3,
          "cpu_percent": 128.0,
          "user_time_s": 0.95,
          "sys_time_s": 0.2
        }
      ],
      "avg_wall_time_s": 0.93,
      "avg_peak_rss_mb": 374.1,
      "avg_cpu_percent": 129.7,
      "min_wall_time_s": 0.9,
      "max_wall_time_s": 0.97,
      "median_wall_time_s": 0.92,
      "stddev_wall_time_s": 0.029,
      "command": "/workspace/build/bin/uast parse /tmp/benchmark-repos/kubernetes/pkg/apis/core/validation/validation_test.go > /dev/null 2>&1",
      "success": true,
      "error": ""
    },
    {
      "tool": "ast-grep",
      "category": "ast_parse_single",
      "description": "Parse + search single file (30478 lines)",
      "version": "0.41.0",
      "runs": [
        {
          "wall_time_s": 0.16,
          "peak_rss_mb": 35.3,
          "cpu_percent": 101.0,
          "user_time_s": 0.14,
          "sys_time_s": 0.02
        },
        {
          "wall_time_s": 0.16,
          "peak_rss_mb": 36.6,
          "cpu_percent": 101.0,
          "user_time_s": 0.15,
          "sys_time_s": 0.0
        },
        {
          "wall_time_s": 0.16,
          "peak_rss_mb": 37.5,
          "cpu_percent": 100.0,
          "user_time_s": 0.15,
          "sys_time_s": 0.01
        }
      ],
      "avg_wall_time_s": 0.16,
      "avg_peak_rss_mb": 36.5,
      "avg_cpu_percent": 100.7,
      "min_wall_time_s": 0.16,
      "max_wall_time_s": 0.16,
      "median_wall_time_s": 0.16,
      "stddev_wall_time_s": 0.0,
      "command": "sg -p \"func \\$NAME\" --lang go /tmp/benchmark-repos/kubernetes/pkg/apis/core/validation/validation_test.go > /dev/null 2>&1; true",
      "success": true,
      "error": ""
    },
    {
      "tool": "codefang",
      "category": "complexity",
      "description": "Cyclomatic + cognitive complexity via UAST",
      "version": "dev-optimized",
      "runs": [
        {
          "wall_time_s": 34.83,
          "peak_rss_mb": 908.3,
          "cpu_percent": 376.0,
          "user_time_s": 128.48,
          "sys_time_s": 2.58
        },
        {
          "wall_time_s": 34.62,
          "peak_rss_mb": 964.2,
          "cpu_percent": 375.0,
          "user_time_s": 127.47,
          "sys_time_s": 2.55
        },
        {
          "wall_time_s": 34.25,
          "peak_rss_mb": 919.6,
          "cpu_percent": 376.0,
          "user_time_s": 126.86,
          "sys_time_s": 2.23
        }
      ],
      "avg_wall_time_s": 34.567,
      "avg_peak_rss_mb": 930.7,
      "avg_cpu_percent": 375.7,
      "min_wall_time_s": 34.25,
      "max_wall_time_s": 34.83,
      "median_wall_time_s": 34.62,
      "stddev_wall_time_s": 0.24,
      "command": "/workspace/build/bin/codefang run -a static/complexity --format compact /tmp/benchmark-repos/kubernetes > /dev/null 2>&1",
      "success": true,
      "error": ""
    },
    {
      "tool": "gocyclo",
      "category": "complexity",
      "description": "Cyclomatic complexity, Go only",
      "version": "latest",
      "runs": [
        {
          "wall_time_s": 2.75,
          "peak_rss_mb": 50.0,
          "cpu_percent": 122.0,
          "user_time_s": 3.07,
          "sys_time_s": 0.28
        },
        {
          "wall_time_s": 2.74,
          "peak_rss_mb": 52.8,
          "cpu_percent": 122.0,
          "user_time_s": 3.1,
          "sys_time_s": 0.27
        },
        {
          "wall_time_s": 2.73,
          "peak_rss_mb": 49.6,
          "cpu_percent": 122.0,
          "user_time_s": 3.15,
          "sys_time_s": 0.2
        }
      ],
      "avg_wall_time_s": 2.74,
      "avg_peak_rss_mb": 50.8,
      "avg_cpu_percent": 122.0,
      "min_wall_time_s": 2.73,
      "max_wall_time_s": 2.75,
      "median_wall_time_s": 2.74,
      "stddev_wall_time_s": 0.008,
      "command": "gocyclo /tmp/benchmark-repos/kubernetes > /dev/null 2>&1; true",
      "success": true,
      "error": ""
    },
    {
      "tool": "scc",
      "category": "code_counting",
      "description": "Lines of code + complexity",
      "version": "3.6.0",
      "runs": [
        {
          "wall_time_s": 0.5,
          "peak_rss_mb": 211.3,
          "cpu_percent": 324.0,
          "user_time_s": 1.29,
          "sys_time_s": 0.34
        },
        {
          "wall_time_s": 0.49,
          "peak_rss_mb": 211.0,
          "cpu_percent": 327.0,
          "user_time_s": 1.28,
          "sys_time_s": 0.34
        },
        {
          "wall_time_s": 0.49,
          "peak_rss_mb": 212.4,
          "cpu_percent": 328.0,
          "user_time_s": 1.24,
          "sys_time_s": 0.39
        }
      ],
      "avg_wall_time_s": 0.493,
      "avg_peak_rss_mb": 211.6,
      "avg_cpu_percent": 326.3,
      "min_wall_time_s": 0.49,
      "max_wall_time_s": 0.5,
      "median_wall_time_s": 0.49,
      "stddev_wall_time_s": 0.005,
      "command": "scc --no-cocomo /tmp/benchmark-repos/kubernetes > /dev/null 2>&1",
      "success": true,
      "error": ""
    },
    {
      "tool": "tokei",
      "category": "code_counting",
      "description": "Lines of code (Rust)",
      "version": "12.1.2",
      "runs": [
        {
          "wall_time_s": 0.43,
          "peak_rss_mb": 38.1,
          "cpu_percent": 345.0,
          "user_time_s": 1.23,
          "sys_time_s": 0.26
        },
        {
          "wall_time_s": 0.42,
          "peak_rss_mb": 39.7,
          "cpu_percent": 348.0,
          "user_time_s": 1.14,
          "sys_time_s": 0.34
        },
        {
          "wall_time_s": 0.43,
          "peak_rss_mb": 39.0,
          "cpu_percent": 345.0,
          "user_time_s": 1.19,
          "sys_time_s": 0.29
        }
      ],
      "avg_wall_time_s": 0.427,
      "avg_peak_rss_mb": 38.9,
      "avg_cpu_percent": 346.0,
      "min_wall_time_s": 0.42,
      "max_wall_time_s": 0.43,
      "median_wall_time_s": 0.43,
      "stddev_wall_time_s": 0.005,
      "command": "tokei /tmp/benchmark-repos/kubernetes > /dev/null 2>&1",
      "success": true,
      "error": ""
    }
  ]
}