{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "Shotness Analyzer Output",
  "description": "JSON schema for the shotness analyzer ComputedMetrics output",
  "type": "object",
  "properties": {
    "aggregate": {
      "$ref": "#/definitions/AggregateData"
    },
    "hotspot_nodes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/HotspotNodeData"
      }
    },
    "node_coupling": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/NodeCouplingData"
      }
    },
    "node_hotness": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/NodeHotnessData"
      }
    }
  },
  "required": [
    "node_hotness",
    "node_coupling",
    "hotspot_nodes",
    "aggregate"
  ],
  "definitions": {
    "AggregateData": {
      "type": "object",
      "properties": {
        "avg_changes_per_node": {
          "type": "number"
        },
        "hot_nodes": {
          "type": "integer"
        },
        "total_changes": {
          "type": "integer"
        },
        "total_couplings": {
          "type": "integer"
        },
        "total_nodes": {
          "type": "integer"
        }
      },
      "required": [
        "total_nodes",
        "total_changes",
        "total_couplings",
        "avg_changes_per_node",
        "hot_nodes"
      ]
    },
    "HotspotNodeData": {
      "type": "object",
      "properties": {
        "change_count": {
          "type": "integer"
        },
        "file": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "risk_level": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "file",
        "change_count",
        "risk_level"
      ]
    },
    "NodeCouplingData": {
      "type": "object",
      "properties": {
        "co_changes": {
          "type": "integer"
        },
        "node1_file": {
          "type": "string"
        },
        "node1_name": {
          "type": "string"
        },
        "node2_file": {
          "type": "string"
        },
        "node2_name": {
          "type": "string"
        }
      },
      "required": [
        "node1_name",
        "node1_file",
        "node2_name",
        "node2_file",
        "co_changes"
      ]
    },
    "NodeHotnessData": {
      "type": "object",
      "properties": {
        "change_count": {
          "type": "integer"
        },
        "coupled_nodes": {
          "type": "integer"
        },
        "file": {
          "type": "string"
        },
        "hotness_score": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "file",
        "change_count",
        "coupled_nodes",
        "hotness_score"
      ]
    }
  }
}