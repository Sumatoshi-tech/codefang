language: json
tests:
  - name: "Root is File"
    code: |
      {"key": "value"}
    query: rfilter(.type == "File") |> map(.type)
    expected:
      - "File"

  - name: "Object is Dict"
    code: |
      {"name": "John"}
    query: rfilter(.type == "Dict") |> map(.type)
    expected:
      - "Dict"

  - name: "Dict has Literal role"
    code: |
      {"key": "value"}
    query: rfilter(.type == "Dict") |> map(.roles)
    expected:
      - ["Literal"]

  - name: "Array is List"
    code: |
      [1, 2, 3]
    query: rfilter(.type == "List") |> map(.type)
    expected:
      - "List"

  - name: "List has Literal role"
    code: |
      ["a", "b"]
    query: rfilter(.type == "List") |> map(.roles)
    expected:
      - ["Literal"]

  - name: "Pair is KeyValue"
    code: |
      {"name": "John"}
    query: rfilter(.type == "KeyValue") |> map(.type)
    expected:
      - "KeyValue"

  - name: "KeyValue has Key and Value roles"
    code: |
      {"key": "value"}
    query: rfilter(.type == "KeyValue") |> map(.roles)
    expected:
      - ["Key", "Value"]
