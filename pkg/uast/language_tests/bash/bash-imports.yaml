language: bash
tests:
  - name: "Source command is a Call"
    code: |
      source ./other.sh
    query: rfilter(.type == "Call") |> map(.type)
    expected:
      - "Call"

  - name: "Dot source is a Call"
    code: |
      . ./another.sh
    query: rfilter(.type == "Call") |> map(.type)
    expected:
      - "Call"

  - name: "Source command name"
    code: |
      source ./config.sh
    query: rfilter(.type == "Identifier") |> rfilter(.token == "source") |> map(.token)
    expected:
      - "source"
      - "source"

  - name: "Dot source command name"
    code: |
      . ./lib.sh
    query: rfilter(.type == "Identifier") |> rfilter(.token == ".") |> map(.token)
    expected:
      - "."
      - "."
