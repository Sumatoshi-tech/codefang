language: yaml
tests:
  - name: "Root is File"
    code: |
      name: value
    query: rfilter(.type == "File") |> map(.type)
    expected:
      - "File"

  - name: "Comment is properly typed"
    code: |
      # This is a comment
      key: value
    query: rfilter(.type == "Comment") |> map(.type)
    expected:
      - "Comment"

  - name: "Block mapping is Dict"
    code: |
      name: John
      age: 30
    query: rfilter(.type == "Dict") |> map(.type)
    expected:
      - "Dict"

  - name: "Dict has Literal role"
    code: |
      key: value
    query: rfilter(.type == "Dict") |> map(.roles)
    expected:
      - ["Literal"]

  - name: "Block mapping pair is KeyValue"
    code: |
      name: John
    query: rfilter(.type == "KeyValue") |> map(.type)
    expected:
      - "KeyValue"

  - name: "KeyValue has Key and Value roles"
    code: |
      key: value
    query: rfilter(.type == "KeyValue") |> map(.roles)
    expected:
      - ["Key", "Value"]
